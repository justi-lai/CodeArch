<!DOCTYPE html>
<html>
  <head>
    <title>Test JSON Response Formatting</title>
    <style>
      .code-analysis {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        line-height: 1.5;
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
      }

      .analysis-section {
        margin: 16px 0;
        padding: 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: #f9f9f9;
      }

      .analysis-section h3 {
        margin: 0 0 12px 0;
        color: #333;
        font-size: 16px;
        font-weight: 600;
      }

      .criticality-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 12px;
        margin-bottom: 12px;
        text-transform: uppercase;
      }

      .criticality-high {
        background-color: #e74c3c;
        color: white;
      }

      .criticality-medium {
        background-color: #f39c12;
        color: white;
      }

      .criticality-low {
        background-color: #27ae60;
        color: white;
      }

      .criticality-unknown {
        background-color: #95a5a6;
        color: white;
      }

      .historical-analysis {
        border: none;
        background: none;
        padding: 0;
      }

      .historical-analysis summary {
        cursor: pointer;
        padding: 8px 0;
        font-weight: 600;
        color: #333;
        list-style: none;
        outline: none;
      }

      .historical-analysis summary::-webkit-details-marker {
        display: none;
      }

      .historical-analysis summary::before {
        content: "▶";
        display: inline-block;
        margin-right: 8px;
        transition: transform 0.2s ease;
        color: #666;
      }

      .historical-analysis[open] summary::before {
        transform: rotate(90deg);
      }

      .historical-content {
        padding: 12px 24px;
        border-left: 3px solid #ddd;
        background: #f0f0f0;
        margin-top: 8px;
      }

      .analysis-section p {
        margin: 8px 0;
        color: #333;
      }

      .usage-context {
        margin-top: 12px;
        font-size: 13px;
        color: #666;
      }
    </style>
  </head>
  <body>
    <div class="code-analysis">
      <div class="analysis-section purpose-section">
        <h3>What the Code Does</h3>
        <p>
          This function validates user input by checking if the email format is
          correct and the password meets security requirements. It returns a
          boolean indicating whether the validation passed.
        </p>
      </div>

      <div class="analysis-section criticality-section">
        <h3>Criticality & Safety</h3>
        <div class="criticality-badge criticality-high">HIGH</div>
        <p>
          <strong>Risk Assessment:</strong> High risk for modification as this
          function is critical for user authentication security. Changes could
          introduce vulnerabilities or break login functionality.
        </p>
        <p>
          <strong>Reasoning:</strong> This validation function is called during
          user registration and login processes. Any errors could compromise
          security or prevent users from accessing the system.
        </p>
        <div class="usage-context">
          <strong>Usage:</strong> References: 15 • Called by: 3 locations • In:
          Function "validateUserCredentials"
        </div>
      </div>

      <div class="analysis-section historical-section">
        <details class="historical-analysis">
          <summary>Historical Analysis</summary>
          <div class="historical-content">
            <p>
              <strong>Introduction:</strong> This validation function was
              introduced in commit abc123 as part of the initial user
              authentication system implementation to ensure secure user
              registration.
            </p>
            <p>
              <strong>Evolution:</strong> The function has been enhanced over
              time to include additional password complexity requirements and
              email format checks based on security audit recommendations.
            </p>
          </div>
        </details>
      </div>
    </div>

    <script>
      // Test JSON parsing simulation
      const mockJsonResponse = {
        purpose:
          "This function validates user input by checking if the email format is correct and the password meets security requirements. It returns a boolean indicating whether the validation passed.",
        criticalityLevel: "HIGH",
        riskAssessment:
          "High risk for modification as this function is critical for user authentication security. Changes could introduce vulnerabilities or break login functionality.",
        reasoning:
          "This validation function is called during user registration and login processes. Any errors could compromise security or prevent users from accessing the system.",
        historicalContext:
          "This validation function was introduced in commit abc123 as part of the initial user authentication system implementation to ensure secure user registration.",
        evolution:
          "The function has been enhanced over time to include additional password complexity requirements and email format checks based on security audit recommendations.",
      };

      console.log("Mock JSON Response:", mockJsonResponse);
      console.log(
        "This demonstrates how our structured JSON response will be formatted by the AI service."
      );
    </script>
  </body>
</html>
